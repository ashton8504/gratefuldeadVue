<template>
  <!-- Header Section -->
  <div class="jumbotron">
    <h1 class="display-4">About The Grateful Dead</h1>
    <p class="lead-paragraph">
      Once in awhile you get shown the light, in the strangest of places if you
      look at it right
    </p>
    <hr class="my-4" />
    <div class="image-container">
      <img
        class="front-image"
        src="../assets/aboutImg/gratefulEst.jpg"
        alt="Grateful Dead"
      />
      <img
        class="hover-image"
        src="../assets/aboutImg/weirBarbie.jpeg"
        alt="Weir Barbie"
      />
    </div>

    <p class="lead">Weir Everywhere</p>
  </div>
  <!-- Band members -->
  <div class="container">
    <h2 class="text-center mb-4 members-header">Grateful Dead Members</h2>
    <div class="row justify-content-center">
      <!-- Jerry Garcia -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/garciaPixar.jpeg"
            class="card-img-top"
            alt="Jerry Garcia"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Jerry Garcia</h5>
            <p class="card-text">Years Active: 1965 - 1995</p>
            <p class="card-text">
              Jerry Garcia, a legendary figure in American music, was the
              founding member and lead guitarist of the iconic band, the
              Grateful Dead. His intricate guitar playing, soulful vocals, and
              improvisational skills defined an era of psychedelic rock and folk
              music. Beyond music, Garcia's enigmatic persona and commitment to
              artistic exploration left an enduring legacy, captivating
              audiences with his eclectic style and profound musical influence.
            </p>
          </div>
        </div>
      </div>

      <!-- Bob Weir -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/weirPixar.jpeg"
            class="card-img-top"
            alt="Bob Weir"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Bob Weir</h5>
            <p class="card-text">Years Active: 1965 - Present</p>
            <p class="card-text">
              Bob Weir, a founding member of the Grateful Dead alongside Jerry
              Garcia, was the band's rhythm guitarist and vocalist, contributing
              his distinct playing style and harmonies to their sound. His
              innovative chord voicings and unconventional approach to rhythm
              guitar were pivotal in shaping the band's unique musical identity.
              Weir's dynamic stage presence and dedication to musical
              experimentation solidified his place as a key figure in the
              evolution of rock and improvisational music.
            </p>
          </div>
        </div>
      </div>

      <!-- Phil Lesh -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/philPixar.jpeg"
            class="card-img-top"
            alt="Phil Lesh"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Phil Lesh</h5>
            <p class="card-text">Years Active: 1965 - 1995</p>
            <p class="card-text">
              Phil Lesh, the visionary bassist of the Grateful Dead, was
              integral in crafting the band's melodic and exploratory
              soundscapes. His intricate bass lines and innovative approach to
              music theory pushed the boundaries of rock, jazz, and classical
              influences within the band's improvisational style. Lesh's
              pioneering use of unconventional scales and harmonic structures
              not only anchored the Dead's rhythm section but also contributed
              significantly to their experimental and genre-defying musical
              legacy.
            </p>
          </div>
        </div>
      </div>

      <!-- Bill Kreutzmann -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/billyPixar.jpeg"
            class="card-img-top"
            alt="Bill Kreutzmann"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Bill Kreutzmann</h5>
            <p class="card-text">Years Active: 1965 - Present</p>
            <p class="card-text">
              Bill Kreutzmann, the rhythmic heartbeat of the Grateful Dead as
              their drummer, brought a unique blend of power and finesse to the
              band's sound. His exceptional ability to merge diverse rhythms and
              textures created the dynamic foundation upon which the Dead's
              improvisations flourished. Kreutzmann's innate sense of groove and
              willingness to explore intricate rhythmic patterns made him an
              indispensable force, contributing immensely to the band's vibrant
              and ever-evolving musical landscape.
            </p>
          </div>
        </div>
      </div>

      <!-- Brent Mydland -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/brentPixar.jpeg"
            class="card-img-top"
            alt="Brent Mydland"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title text-center">Brent Mydland</h5>
            <p class="card-text text-center">Years Active: 1979 - 1990</p>
            <p class="card-text">
              Brent Mydland, the keyboardist and vocalist for the Grateful Dead,
              added a vibrant layer of soul and depth to the band's sonic
              tapestry. His versatile playing style, blending rock, blues, and
              jazz influences, enriched the Dead's sound with poignant melodies
              and textured harmonies. Mydland's emotive vocals and innovative
              keyboard work elevated the band's live performances, contributing
              a new dimension of musical expression to the Grateful Dead's
              repertoire.
            </p>
          </div>
        </div>
      </div>

      <!-- Ron "Pigpen" McKernan -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/pigpenPixar.jpeg"
            class="card-img-top"
            alt="Ron 'Pigpen' McKernan"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Ron "Pigpen" McKernan</h5>
            <p class="card-text">Years Active: 1965 - 1972</p>
            <p class="card-text">
              Ron "Pigpen" McKernan, an original member of the Grateful Dead,
              was a vital force in the band, infusing their early years with
              blues, soul, and a raw, authentic energy. As the vocalist,
              harmonica player, and occasional keyboardist, his gritty vocals
              and passionate stage presence added a distinctive edge to the
              Dead's sound. Pigpen's deep-rooted connection to blues music and
              his charismatic performances contributed significantly to shaping
              the band's identity during its formative years, leaving an
              indelible mark on their musical legacy.
            </p>
          </div>
        </div>
      </div>

      <!-- Mickey Hart -->
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <img
            src="../assets/aboutImg/mickPixar.jpeg"
            class="card-img-top"
            alt="Mickey Hart"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Mickey Hart</h5>
            <p class="card-text">Years Active: 1967 - Present</p>
            <p class="card-text">
              Mickey Hart, the innovative percussionist of the Grateful Dead,
              introduced an expansive array of rhythms and textures into the
              band's music. His mastery of diverse percussion instruments from
              around the world infused the Dead's sound with a rich tapestry of
              global influences and hypnotic beats. Hart's relentless
              exploration of rhythm, coupled with his dedication to
              ethnomusicology and sonic experimentation, expanded the band's
              sonic horizons, making him a cornerstone of the Grateful Dead's
              rhythmic landscape.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="centered-line">
    <hr />
  </div>

  <!-- Setlist API Section -->
  <div class="container mt-5">
    <h2 class="text-center mb-4">Search Information</h2>
    <form @submit.prevent="searchByYear">
      <div class="row justify-content-center">
        <div class="col-md-6 col-sm-12">
          <input
            type="number"
            v-model="search.year"
            id="year"
            class="form-control centered-input"
            @keyup.enter="searchByYear"
            min="0"
            max="9999"
            maxlength="4"
            placeholder="Enter a year"
          />
        </div>
      </div>
      <div class="text-center mt-3">
        <button type="submit" class="btn btn-primary">Search</button>
      </div>
    </form>

    <!-- Display search results -->
    <div v-if="searchResults.length">
      <h2 class="text-center mb-4">Search Results</h2>
      <div class="search-results">
        <div
          v-for="(setlistItem, index) in searchResults"
          :key="index"
          class="search-result"
        >
          <h3>{{ setlistItem.eventDate }}</h3>
          <p>
            Venue: {{ setlistItem.venue.name }},
            {{ setlistItem.venue.city.name }}
          </p>
          <div v-for="(set, setIndex) in setlistItem.sets.set" :key="setIndex">
            <h4>{{ set.name }}</h4>
            <ul>
              <li v-for="(song, songIndex) in set.song" :key="songIndex">
                {{ song.name }} - {{ song.info }}
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import axios from "axios";

export default {
  name: "About",
  data() {
    return {
      search: {
        year: null,
        state: "",
        city: "",
        song: "",
      },
      searchResults: [],
      error: null,
    };
  },
  methods: {
    async searchByYear() {
      console.log(
        "API URL:",
        `http://localhost:3000/api/setlist?year=${this.search.year}`
      );

      try {
        const response = await axios.get("http://localhost:3000/api/setlist", {
          params: {
            year: this.search.year,
          },
        });

        console.log("Received Data from Server:", response.data);

        this.searchResults = response.data;
        this.clearInput();
      } catch (error) {
        console.error("Error fetching search results:", error);
      }
    },
    searchOnEnter() {
      this.searchByYear();
    },
    clearInput() {
      this.search.year = null;
    },
  },
};
</script>

<style scoped>
.jumbotron {
  background-color: #f8f9fa;
  padding: 4rem 2rem;
  border-radius: 0.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  font-family: "Montserrat", sans-serif;
  width: 50%;
  margin: 0 auto;
}

.display-4 {
  font-size: 3.5rem;
  font-weight: bold;
  color: #343a40;
  margin-bottom: 2rem;
  text-align: center;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.members-header {
  font-family: "Roboto", sans-serif;
  font-size: 40px;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-align: center;
  margin-bottom: 20px;
  margin-top: 150px;
  text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
}

.image-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 400px;
  height: 400px;
  overflow: hidden;
  border: 2px solid black;
  border-radius: 30px;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 30px;
}

.front-image,
.hover-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
  transition: opacity 0.3s ease;
}

.hover-image {
  opacity: 0;
}

.image-container:hover .hover-image {
  opacity: 1;
}

.image-container:hover .front-image {
  opacity: 0;
}
.lead {
  font-size: 38px;
  font-weight: bold;
  color: #343a40;
  text-align: center;
  margin-bottom: 2rem;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
  line-height: 1.5;
}

.lead-paragraph {
  font-size: 18px;
  font-weight: bold;
  color: #343a40;
  text-align: center;
  margin-bottom: 2rem;
  line-height: 1.5;
}

p {
  font-size: 1.1rem;
  color: #495057;
  line-height: 1.6;
}

.btn-primary {
  background-color: #6c757d;
  border-color: #6c757d;
}

.btn-primary:hover {
  background-color: #495057;
  border-color: #495057;
}

.about-main-image {
  display: block;
  margin-right: auto;
  margin-left: auto;
  border: 2px solid #6c757d;
  max-width: 40%;
  min-width: 200px;
  height: auto;
  border-radius: 30px;

  transition: transform 0.5s ease;
  cursor: pointer;
}

.card {
  border: 2px solid #0069aa;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.card-title,
.card-text {
  text-align: center;
}

.card-title {
  font-size: 28px;
  font-weight: bold;
  color: #343a40;
  text-shadow: 1px 1px 2px rgba(128, 122, 122, 0.4);
}

/* Styles For Search Results */
input[type="number"] {
  width: 100%;
  padding: 10px;
  font-size: 1.2rem;
  border: 1px solid #ccc;
  border-radius: 5px;
  text-align: center;
  margin-bottom: 20px;
}

h2.text-center {
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  text-align: center;
}
.search-results {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
}

.search-result {
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 5px;
  width: 300px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.search-result {
  background-color: #f8f9fa;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  width: calc(33% - 40px);
  margin-bottom: 20px;
  text-align: center;
}

.btn-primary {
  background-color: #2064a0;
  border: 2px solid #2064a0;
  color: white;
  padding: 12px 24px;
  font-size: 1.2rem;
  border-radius: 5px;
  transition: all 0.3s ease;
  margin-bottom: 50px;
}

.btn-primary:hover {
  background-color: #144177;
  border-color: #144177;
  cursor: pointer;
}

.centered-input {
  width: 100%;
  padding: 10px;
  font-size: 1.2rem;
  border: 2px solid #2064a0;
  border-radius: 5px;
  text-align: center;
  margin-bottom: 20px;
  transition: border-color 0.3s ease;
}

.centered-input:hover {
  border-color: #144177;
}

.event-date {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 8px;
}

.venue-info {
  color: #333;
}

.venue-name {
  font-weight: bold;
}

.venue-location {
  font-style: italic;
  margin-top: 4px;
}

ul {
  list-style: none;
  padding-left: 0;
  margin-top: 0;
}

.centered-line {
  width: 50%;
  margin: 0 auto;
  text-align: center;
  padding: 20px;
}

.centered-line hr {
  border: none;
  height: 2px;
  background-color: black;
  width: 100%;
}

/* Media Queries for Improved Mobile Responsiveness */
@media (max-width: 768px) {
  .jumbotron {
    padding: 2rem 1rem;
  }

  .image-container {
    width: 300px;
    height: 300px;
  }
}

@media (max-width: 576px) {
  .jumbotron {
    padding: 1rem 0.5rem;
  }

  .image-container {
    width: 200px;
    height: 200px;
  }

  .search-results {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .search-result {
    width: 100%;
    margin-bottom: 20px;
  }
}
</style>
